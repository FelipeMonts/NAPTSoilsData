names(NAPT.Texture.data)<-c('SAND' , 'SILT' , 'CLAY') ;
NAPT.Texture.data
NAPT.Texture.data$Sample<-NAPT.all.notNA$Sample ;
which(is.na.data.frame(NAPT.Texture.data),arr.ind = T)
NAPT.Texture.data.norm.1<-TT.normalise.sum(NAPT.Texture.data[c( 1:118),])
NAPT.Texture.data.norm.1$Sample<-NAPT.Texture.data[c( 1:118),4]
which(is.na.data.frame(NAPT.Texture.data.norm.1),arr.ind = T)
NAPT<-NAPT.Texture.data.norm.1
head(NAPT)
ALLP.data.1<-readWorksheetFromFile("Results_data_all.xlsx", sheet="ALP") ;
str(ALLP.data.1)
head(ALLP.data.1)
ALLP.data.2<-ALLP.data.1[,c('Sand_Mean' , 'Silt_Mean' , 'Clay_Mean', 'Sample')] ;
names(ALLP.data.2)[1:3]<-c('SAND' , 'SILT' , 'CLAY')  ;
ALLP<-TT.normalise.sum(ALLP.data.2)
ALLP$Sample<-ALLP.data.2$Sample
NAPT.Texture.clases<-TT.points.in.classes(
tri.data = NAPT,
class.sys = "USDA-NCSS.TT",
PiC.type  = "t"
)
NAPT$TextureClass<-NAPT.Texture.clases  ;
head(NAPT)
ALLP.Texture.clases<-TT.points.in.classes(
tri.data = ALLP,
class.sys = "USDA-NCSS.TT",
PiC.type  = "t"
)
ALLP$TextureClass<-ALLP.Texture.clases ;
head(ALLP)
All.Data<-rbind(NAPT,ALLP) ;
head(All.Data)
tail(All.Data)
All.Data$TextureFactor<-as.factor(All.Data$TextureClass) ;
levels(All.Data$TextureFactor)
for (i in levels(All.Data$TextureFactor)) {
#i=levels(All.Data$TextureFactor)[1]
assign(paste0('Texture_',i),All.Data[All.Data$TextureFactor==i,])
}
Selected_Samples<-c(Texture_C$Sample, Texture_CL$Sample[1:6] , Texture_L$Sample[1:6], Texture_LS$Sample[1:6], Texture_S$Sample[1:6],Texture_SCL$Sample, Texture_SICL$Sample[1:6],Texture_SIL$Sample[1:6], Texture_SL$Sample[1:6])
Paper.Samples<-All.Data[All.Data$Sample %in% Selected_Samples, ]
head(Paper.Samples)
writeWorksheetToFile("Results_data_all.xlsx",Paper.Samples, sheet="Selected") ;
str(NAPT.data)
head(NAPT.data)
str(Paper.Samples)
head(Paper.Samples)
str(NAPT.data.n)
head(NAPT.data.n)
which(NAPT.data[,1] == 'n', arr.ind = T)
NAPT.data.n_rows<-which(NAPT.data[,1] == 'n', arr.ind = T)  ;
NAPT.data[NAPT.data.n_rows+1,1]
head(NAPT.data.Not_n)
head(NAPT.data)
NAPT.data<-readWorksheetFromFile("Results_data_all.xlsx", sheet="Combined") ;
str(NAPT.data)
head(NAPT.data)
NAPT.data$SAMPLE<-NAPT.data$X ;
head(NAPT.data)
paste0(NAPT.data[NAPT.data.n_rows+1,1], '^' , NAPT.data[NAPT.data.n_rows,1])
NAPT.data[NAPT.data.n_rows,'SAMPLE']<-paste0(NAPT.data[NAPT.data.n_rows+1,1], '^' , NAPT.data[NAPT.data.n_rows,1]) ;
head(NAPT.data)
NAPT.data.head<-NAPT.data[c(1,2),] ;
NAPT.data.head
NAPT.data.nohead<-NAPT.data[-c(1,2),] ;
str_split(NAPT.data.nohead$X, " ", simplify = T)
NAPT.data.nohead$Type<-str_split(NAPT.data.nohead$X, " ", simplify = T)[,1]
str(NAPT.data.nohead)
head(NAPT.data.nohead)
str_split(NAPT.data.nohead$X, " ", simplify = T)[,2]
str_split(str_split(NAPT.data.nohead$X, " ", simplify = T)[,2], "_" ,simplify = T)
NAPT.data.nohead$SAMPLE<-str_split(str_split(NAPT.data.nohead$X, " ", simplify = T)[,2], "_" ,simplify = T)[,1]
NAPT.data.nohead$TYPE<-str_split(str_split(NAPT.data.nohead$X, " ", simplify = T)[,2], "_" ,simplify = T)[,2] ;
head(NAPT.data.nohead)
NAPT.data.nohead$VALUE<-str_split(str_split(NAPT.data.nohead$X, " ", simplify = T)[,2], "_" ,simplify = T)[,2] ;
head(NAPT.data.nohead)
NAPT.data<-readWorksheetFromFile("Results_data_all.xlsx", sheet="Combined") ;
str(NAPT.data)
head(NAPT.data)
NAPT.data.head<-NAPT.data[c(1,2),] ;
NAPT.data.nohead<-NAPT.data[-c(1,2),] ;
NAPT.data.nohead$SAMPLE<-str_split(str_split(NAPT.data.nohead$X, " ", simplify = T)[,2], "_" ,simplify = T)[,1] ;
NAPT.data.nohead$VALUE<-str_split(str_split(NAPT.data.nohead$X, " ", simplify = T)[,2], "_" ,simplify = T)[,2] ;
str(NAPT.data.nohead)
head(NAPT.data.nohead)
NAPT.data.nohead.n_rows<-which(NAPT.data.nohead[,1] == 'n', arr.ind = T)  ;
NAPT.data.nohead[NAPT.data.nohead.n_rows, 'SAMPLE']<-NAPT.data.nohead[NAPT.data.nohead.n_rows+1, 'SAMPLE'] ;
head(NAPT.data.nohead)
NAPT.data.nohead[NAPT.data.nohead.n_rows, 'VALUE']<-NAPT.data.nohead[NAPT.data.nohead.n_rows+1, 'X'] ;
head(NAPT.data.nohead)
NAPT.data<-readWorksheetFromFile("Results_data_all.xlsx", sheet="Combined") ;
str(NAPT.data)
head(NAPT.data)
NAPT.data.head<-NAPT.data[c(1,2),] ;
NAPT.data.nohead<-NAPT.data[-c(1,2),] ;
NAPT.data.nohead$SAMPLE<-str_split(str_split(NAPT.data.nohead$X, " ", simplify = T)[,2], "_" ,simplify = T)[,1] ;
NAPT.data.nohead$VALUE<-str_split(str_split(NAPT.data.nohead$X, " ", simplify = T)[,2], "_" ,simplify = T)[,2] ;
NAPT.data.nohead.n_rows<-which(NAPT.data.nohead[,1] == 'n', arr.ind = T)  ;
NAPT.data.nohead[NAPT.data.nohead.n_rows, 'SAMPLE']<-NAPT.data.nohead[NAPT.data.nohead.n_rows+1, 'SAMPLE'] ;
NAPT.data.nohead[NAPT.data.nohead.n_rows, 'VALUE']<-NAPT.data.nohead[NAPT.data.nohead.n_rows, 'X'] ;
str(NAPT.data.nohead)
head(NAPT.data.nohead)
NAPT.data.Median.1<-NAPT.data.nohead[grep('Median$',NAPT.data.nohead$X),]
NAPT.data.Median<-NAPT.data.nohead[NAPT.data.nohead$VALUE == 'Median',]
str(NAPT.data.Median.1)
str(NAPT.data.Median)
which(! NAPT.data.Median %in% NAPT.data.Median.1)
which(! NAPT.data.Median.1 %in% NAPT.data.Median)
head(NAPT.data.Median.1)
head(NAPT.data.Median)
which(! NAPT.data.Median.1$X %in% NAPT.data.Median$X)
NAPT.data.Median.1[which(! NAPT.data.Median.1$X %in% NAPT.data.Median$X),]
NAPT.data<-readWorksheetFromFile("Results_data_all.xlsx", sheet="Combined") ;
str(NAPT.data)
head(NAPT.data)
NAPT.data.head<-NAPT.data[c(1,2),] ;
NAPT.data.nohead<-NAPT.data[-c(1,2),] ;
NAPT.data.nohead$SAMPLE<-str_split(str_split(NAPT.data.nohead$X, " ", simplify = T)[,2], "_" ,simplify = T)[,1] ;
NAPT.data.nohead$VALUE<-str_split(str_split(NAPT.data.nohead$X, " ", simplify = T)[,2], "_" ,simplify = T)[,2] ;
NAPT.data.nohead.n_rows<-which(NAPT.data.nohead[,1] == 'n', arr.ind = T)  ;
NAPT.data.nohead[NAPT.data.nohead.n_rows, 'SAMPLE']<-NAPT.data.nohead[NAPT.data.nohead.n_rows+1, 'SAMPLE'] ;
NAPT.data.nohead[NAPT.data.nohead.n_rows, 'VALUE']<-NAPT.data.nohead[NAPT.data.nohead.n_rows, 'X'] ;
str(NAPT.data.nohead)
head(NAPT.data.nohead)
NAPT.data.Median.1<-NAPT.data.nohead[grep('Median$',NAPT.data.nohead$X),]
str(NAPT.data.Median.1)
head(NAPT.data.Median.1)
NAPT.data.Median<-NAPT.data.nohead[NAPT.data.nohead$VALUE == 'Median',]
str(NAPT.data.Median)
head(NAPT.data.Median)
NAPT.Texture.Hygrom<-NAPT.data.Median[,c(1,2,3,4,8,9)]
head(NAPT.Texture.Hygrom)
names(NAPT.Texture.Hygrom)[1:4]
names(NAPT.Texture.Hygrom)[1:4]<-c('Sample','SAND' , 'SILT' , 'CLAY') ;
head(NAPT.Texture.Hygrom)
NAPT.Texture.Pipet<-NAPT.data.Median[,c(1,5,6,7,8,9)] ;
str(NAPT.Texture.Pipet)
head(NAPT.Texture.Pipet,20)
NAPT.all<-rbind(NAPT.Texture.Hygrom,NAPT.Texture.Pipet)
names(NAPT.Texture.Pipet)[1:4]<-c('Sample', 'SAND' , 'SILT' , 'CLAY') ;
NAPT.all<-rbind(NAPT.Texture.Hygrom,NAPT.Texture.Pipet)  ;
str(NAPT.all)
head(NAPT.all,20)
NAPT.Texture.Hydrom<-NAPT.data.Median[,c(1,2,3,4,8,9)] ;
NAPT.Texture.Hydrom$ANALYSIS<-c('Hydrometer')
head(NAPT.Texture.Hydrom)
names(NAPT.Texture.Hydrom)[1:4]<-c('Sample','SAND' , 'SILT' , 'CLAY') ;
str(NAPT.Texture.Hydrom)
head(NAPT.Texture.Hydrom)
NAPT.Texture.Pipet<-NAPT.data.Median[,c(1,5,6,7,8,9)] ;
NAPT.Texture.Pipet$ANALYSIS<-c('Pipette')  ;
str(NAPT.Texture.Pipet)
head(NAPT.Texture.Pipet,20)
names(NAPT.Texture.Pipet)[1:4]<-c('Sample', 'SAND' , 'SILT' , 'CLAY') ;
head(NAPT.Texture.Pipet,20)
NAPT.all<-rbind(NAPT.Texture.Hygrom,NAPT.Texture.Pipet)  ;
head(NAPT.Texture.Pipet,20)
NAPT.all<-rbind(NAPT.Texture.Hydrom,NAPT.Texture.Pipet)  ;
str(NAPT.all)
head(NAPT.all,20)
NAPT.all.notNA<-NAPT.all[which(!(is.na.data.frame(NAPT.all))),]
str(NAPT.all.notNA)
head(NAPT.all.notNA,20)
str(NAPT.all)
NAPT.all.notNA<-NAPT.all[which(!(is.na.data.frame(NAPT.all))),]
str(NAPT.all.notNA)
head(NAPT.all,20)
str(NAPT.all)
NAPT.Texture.data<-data.frame(NAPT.all[,c(1,5,6,7)] ,as.numeric(NAPT.all$SAND),as.numeric(NAPT.all$SILT),as.numeric(NAPT.all$CLAY)) ;
str(NAPT.Texture.data)
head(NAPT.Texture.data)
names(NAPT.Texture.data)<-c('SAND' , 'SILT' , 'CLAY') ;
names(NAPT.Texture.data)[5:7]
names(NAPT.Texture.data)[5:7]<-c('SAND' , 'SILT' , 'CLAY') ;
head(NAPT.Texture.data)
NAPT.Texture.data<-data.frame(NAPT.all[,c(1,5,6,7)] ,as.numeric(NAPT.all$SAND),as.numeric(NAPT.all$SILT),as.numeric(NAPT.all$CLAY)) ;
str(NAPT.Texture.data)
head(NAPT.Texture.data)
names(NAPT.Texture.data)
names(NAPT.Texture.data)[c(5,6,7)]<-c('SAND' , 'SILT' , 'CLAY') ;
names(NAPT.Texture.data)
str(NAPT.Texture.data)
head(NAPT.Texture.data)
NAPT.Texture.data
which(is.na.data.frame(NAPT.Texture.data),arr.ind = T)
NAPT.data<-readWorksheetFromFile("Results_data_all.xlsx", sheet="Combined") ;
str(NAPT.data)
head(NAPT.data)
NAPT.data.head<-NAPT.data[c(1,2),] ;
NAPT.data.nohead<-NAPT.data[-c(1,2),] ;
NAPT.data.nohead$SAMPLE<-str_split(str_split(NAPT.data.nohead$X, " ", simplify = T)[,2], "_" ,simplify = T)[,1] ;
NAPT.data.nohead$VALUE<-str_split(str_split(NAPT.data.nohead$X, " ", simplify = T)[,2], "_" ,simplify = T)[,2] ;
NAPT.data.nohead.n_rows<-which(NAPT.data.nohead[,1] == 'n', arr.ind = T)  ;
NAPT.data.nohead[NAPT.data.nohead.n_rows, 'SAMPLE']<-NAPT.data.nohead[NAPT.data.nohead.n_rows+1, 'SAMPLE'] ;
NAPT.data.nohead[NAPT.data.nohead.n_rows, 'VALUE']<-NAPT.data.nohead[NAPT.data.nohead.n_rows, 'X'] ;
str(NAPT.data.nohead)
head(NAPT.data.nohead)
NAPT.data.Median<-NAPT.data.nohead[NAPT.data.nohead$VALUE == 'Median',]
str(NAPT.data.Median)
head(NAPT.data.Median)
NAPT.Texture.Hydrom<-NAPT.data.Median[,c(1,2,3,4,8,9)] ;
NAPT.Texture.Hydrom$ANALYSIS<-c('Hydrometer') ;
head(NAPT.Texture.Hydrom)
names(NAPT.Texture.Hydrom)[1:4]<-c('Sample','SAND' , 'SILT' , 'CLAY') ;
str(NAPT.Texture.Hydrom)
head(NAPT.Texture.Hydrom)
NAPT.Texture.Pipet<-NAPT.data.Median[,c(1,5,6,7,8,9)] ;
NAPT.Texture.Pipet$ANALYSIS<-c('Pipette')  ;
str(NAPT.Texture.Pipet)
head(NAPT.Texture.Pipet,20)
names(NAPT.Texture.Pipet)[1:4]<-c('Sample', 'SAND' , 'SILT' , 'CLAY') ;
NAPT.all<-rbind(NAPT.Texture.Hydrom,NAPT.Texture.Pipet)  ;
str(NAPT.all)
head(NAPT.all,20)
NAPT.Texture.data<-data.frame(NAPT.all[,c(1,5,6,7)] ,as.numeric(NAPT.all$SAND),as.numeric(NAPT.all$SILT),as.numeric(NAPT.all$CLAY)) ;
str(NAPT.Texture.data)
head(NAPT.Texture.data)
names(NAPT.Texture.data)[c(5,6,7)]<-c('SAND' , 'SILT' , 'CLAY') ;
NAPT.Texture.data
which(is.na.data.frame(NAPT.Texture.data),arr.ind = T)
NAPT.Texture.data<-data.frame(as.numeric(NAPT.all$SAND),as.numeric(NAPT.all$SILT),as.numeric(NAPT.all$CLAY),NAPT.all[,c(1,5,6,7)]) ;
str(NAPT.Texture.data)
head(NAPT.Texture.data)
names(NAPT.Texture.data)[c(1,2,3)]<-c('SAND' , 'SILT' , 'CLAY') ;
head(NAPT.Texture.data)
which(is.na.data.frame(NAPT.Texture.data),arr.ind = T)
which(!is.na.data.frame(NAPT.Texture.data),arr.ind = T)
str(NAPT.Texture.data)
which(!is.na.data.frame(NAPT.Texture.data),arr.ind = T)
which(is.na.data.frame(NAPT.Texture.data),arr.ind = T)
NAPT.Texture.data.1<-[which(is.na.data.frame(NAPT.Texture.data),arr.ind = T)]
NAPT.Texture.data.norm.1<-TT.normalise.sum(NAPT.Texture.data[c( 1:118),])
head(NAPT.Texture.data.1)
NAPT.Texture.data.1<-NAPT.Texture.data[which(is.na.data.frame(NAPT.Texture.data),arr.ind = T)]
head(NAPT.Texture.data.1)
str(NAPT.Texture.data.1)
NAPT.Texture.data.1<-NAPT.Texture.data[which(!is.na.data.frame(NAPT.Texture.data),arr.ind = T)]
head(NAPT.Texture.data.1)
NAPT.Texture.data.norm.1<-TT.normalise.sum(NAPT.Texture.data)
which(is.na(NAPT.Texture.data$SAND))
NAPT.Texture.data.norm.1<-TT.normalise.sum(NAPT.Texture.data[1:511,])
NAPT.Texture.data.norm.1<-TT.normalise.sum(NAPT.Texture.data[1:512,])
NAPT.Texture.data.norm.1<-TT.normalise.sum(NAPT.Texture.data[1:511,])
NAPT.Texture.data.norm.1
NAPT.Texture.data.norm.2<-data.frame(NAPT.Texture.data.norm.1,NAPT.Texture.data[1:511,c(4,5,6,7)]))
NAPT.Texture.data.norm.2<-data.frame(NAPT.Texture.data.norm.1,NAPT.Texture.data[1:511,c(4,5,6,7)])
which(is.na.data.frame(NAPT.Texture.data.norm.2),arr.ind = T)
NAPT<-NAPT.Texture.data.norm.2
head(NAPT)
TT.plot(
class.sys          ="USDA-NCSS.TT",
tri.data           = NAPT,
main               ="NAPT Texture Data",
#class.p.bg.col     =T,
col                ="gray",
cex                = 0.5
)
ALLP.data.1<-readWorksheetFromFile("Results_data_all.xlsx", sheet="ALP") ;
str(ALLP.data.1)
ALLP.data.1<-readWorksheetFromFile("Results_data_all.xlsx", sheet="ALP",startCol= 1, endCol=7) ;
str(ALLP.data.1)
ALLP.data.1<-readWorksheetFromFile("Results_data_all.xlsx", sheet="ALP",startCol= 1, endCol=7) ;
str(ALLP.data.1)
ALLP.data.2<-ALLP.data.1[,c('Sand_Mean' , 'Silt_Mean' , 'Clay_Mean', 'Sample')] ;
names(ALLP.data.2)[1:3]<-c('SAND' , 'SILT' , 'CLAY')  ;
ALLP.norm<-TT.normalise.sum(ALLP.data.2)
ALLP.norm$Sample<-ALLP.data.2$Sample
str(ALLP.norm)
head(ALLP.norm)
TT.plot(
class.sys          ="USDA-NCSS.TT",
tri.data           = ALLP,
main               ="NAPT Texture Data",
#class.p.bg.col     =T,
col                ="gray",
cex                = 0.5
)
TT.plot(
class.sys          ="USDA-NCSS.TT",
tri.data           = ALLP.norm,
main               ="NAPT Texture Data",
#class.p.bg.col     =T,
col                ="gray",
cex                = 0.5
)
geo<-TT.plot(
class.sys          ="USDA-NCSS.TT",
#tri.data           = NAPT,
#main               ="NAPT Texture Data"
#class.p.bg.col     =T,
)
TT.plot(
class.sys          ="USDA-NCSS.TT",
tri.data           = NAPT,
main               ="NAPT Texture Data",
#class.p.bg.col     =T,
col                ="BLUE",
cex                = 0.5
)
TT.points(
geo,
tri.data           = ALLP,
#main               ="NAPT Texture Data",
#class.p.bg.col     =T,
col                ="RED",
cex                = 0.5
)
TT.points(
geo,
tri.data           = ALLP.norm,
#main               ="NAPT Texture Data",
#class.p.bg.col     =T,
col                ="RED",
cex                = 0.5
)
TT.points(
geo,
tri.data           = Paper.Samples,
#main               ="NAPT Texture Data",
#class.p.bg.col     =T,
col                ="GREEN",
cex                = 0.6
)
NAPT.Texture.clases<-TT.points.in.classes(
tri.data = NAPT,
class.sys = "USDA-NCSS.TT",
PiC.type  = "t"
)
NAPT$TextureClass<-NAPT.Texture.clases  ;
head(NAPT)
ALLP.Texture.clases<-TT.points.in.classes(
tri.data = ALLP.norm,
class.sys = "USDA-NCSS.TT",
PiC.type  = "t"
)
ALLP$TextureClass<-ALLP.Texture.clases ;
head(ALLP)
ALLP.norm$TextureClass<-ALLP.Texture.clases ;
head(ALLP)
All.Data<-rbind(NAPT,ALLP) ;
head(ALLP)
head(ALLP.norm)
head(ALLP.norm)
head(NAPT.all,20)
NAPT.data<-readWorksheetFromFile("Results_data_all.xlsx", sheet="Combined", startRow=1, endRow=864) ;
str(NAPT.data)
str(NAPT.data)
head(NAPT.data)
NAPT.data.head<-NAPT.data[c(1,2),] ;
NAPT.data.nohead<-NAPT.data[-c(1,2),] ;
NAPT.data.nohead$SAMPLE<-str_split(str_split(NAPT.data.nohead$X, " ", simplify = T)[,2], "_" ,simplify = T)[,1] ;
NAPT.data.nohead$VALUE<-str_split(str_split(NAPT.data.nohead$X, " ", simplify = T)[,2], "_" ,simplify = T)[,2] ;
NAPT.data.nohead.n_rows<-which(NAPT.data.nohead[,1] == 'n', arr.ind = T)  ;
NAPT.data.nohead[NAPT.data.nohead.n_rows, 'SAMPLE']<-NAPT.data.nohead[NAPT.data.nohead.n_rows+1, 'SAMPLE'] ;
NAPT.data.nohead[NAPT.data.nohead.n_rows, 'VALUE']<-NAPT.data.nohead[NAPT.data.nohead.n_rows, 'X'] ;
str(NAPT.data.nohead)
head(NAPT.data.nohead)
NAPT.data.Median<-NAPT.data.nohead[NAPT.data.nohead$VALUE == 'Median',]
str(NAPT.data.Median)
head(NAPT.data.Median)
NAPT.Texture.Hydrom<-NAPT.data.Median[,c(1,2,3,4,8,9)] ;
NAPT.Texture.Hydrom$ANALYSIS<-c('Hydrometer') ;
head(NAPT.Texture.Hydrom)
names(NAPT.Texture.Hydrom)[1:4]<-c('Sample','SAND' , 'SILT' , 'CLAY') ;
str(NAPT.Texture.Hydrom)
head(NAPT.Texture.Hydrom)
NAPT.Texture.Pipet<-NAPT.data.Median[,c(1,5,6,7,8,9)] ;
NAPT.Texture.Pipet$ANALYSIS<-c('Pipette')  ;
str(NAPT.Texture.Pipet)
head(NAPT.Texture.Pipet,20)
names(NAPT.Texture.Pipet)[1:4]<-c('Sample', 'SAND' , 'SILT' , 'CLAY') ;
NAPT.all<-rbind(NAPT.Texture.Hydrom,NAPT.Texture.Pipet)  ;
str(NAPT.all)
head(NAPT.all,20)
NAPT.Texture.data<-data.frame(as.numeric(NAPT.all$SAND),as.numeric(NAPT.all$SILT),as.numeric(NAPT.all$CLAY),NAPT.all[,c(1,5,6,7)]) ;
str(NAPT.Texture.data)
names(NAPT.Texture.data)[c(1,2,3)]<-c('SAND' , 'SILT' , 'CLAY') ;
head(NAPT.Texture.data)
str(NAPT.Texture.data)
which(is.na(NAPT.Texture.data$SAND))
NAPT.Texture.data.norm.1<-TT.normalise.sum(NAPT.Texture.data[1:511,])
NAPT.Texture.data.norm.1<-TT.normalise.sum(NAPT.Texture.data[1:511,])
NAPT.Texture.data.norm.2<-data.frame(NAPT.Texture.data.norm.1,NAPT.Texture.data[1:511,c(4,5,6,7)])
which(is.na.data.frame(NAPT.Texture.data.norm.2),arr.ind = T)
NAPT<-NAPT.Texture.data.norm.2
head(NAPT)
head(NAPT.Texture.data)
str(NAPT.all)
NAPT.Texture.data.norm.2<-data.frame(NAPT.Texture.data.norm.1,NAPT.Texture.data[1:511,])
which(is.na.data.frame(NAPT.Texture.data.norm.2),arr.ind = T)
NAPT<-NAPT.Texture.data.norm.2
head(NAPT)
TT.plot(
class.sys          ="USDA-NCSS.TT",
tri.data           = NAPT,
main               ="NAPT Texture Data",
#class.p.bg.col     =T,
col                ="gray",
cex                = 0.5
)
ALLP.data.1<-readWorksheetFromFile("Results_data_all.xlsx", sheet="ALP",startCol= 1, endCol=7) ;
str(ALLP.data.1)
ALLP.data.2<-ALLP.data.1[,c('Sand_Mean' , 'Silt_Mean' , 'Clay_Mean', 'Sample')] ;
names(ALLP.data.2)[1:3]<-c('SAND' , 'SILT' , 'CLAY')  ;
ALLP.norm<-TT.normalise.sum(ALLP.data.2)   ;
ALLP<-data.frame(ALLP.norm,ALLP.data.2 )  ;
str(ALLP)
head(ALLP)
TT.plot(
class.sys          ="USDA-NCSS.TT",
tri.data           = ALLP,
main               ="NAPT Texture Data",
#class.p.bg.col     =T,
col                ="gray",
cex                = 0.5
)
TT.plot(
class.sys          ="USDA-NCSS.TT",
tri.data           = NAPT,
main               ="NAPT Texture Data",
#class.p.bg.col     =T,
col                ="BLUE",
cex                = 0.5
)
TT.points(
geo,
tri.data           = ALLP.norm,
#main               ="NAPT Texture Data",
#class.p.bg.col     =T,
col                ="RED",
cex                = 0.5
)
TT.points(
geo,
tri.data           = Paper.Samples,
#main               ="NAPT Texture Data",
#class.p.bg.col     =T,
col                ="GREEN",
cex                = 0.6
)
NAPT.Texture.clases<-TT.points.in.classes(
tri.data = NAPT,
class.sys = "USDA-NCSS.TT",
PiC.type  = "t"
)
NAPT$TextureClass<-NAPT.Texture.clases  ;
head(NAPT)
ALLP.Texture.clases<-TT.points.in.classes(
tri.data = ALLP,
class.sys = "USDA-NCSS.TT",
PiC.type  = "t"
)
ALLP.norm$TextureClass<-ALLP.Texture.clases ;
head(ALLP.norm)
ALLP.norm<-TT.normalise.sum(ALLP.data.2)   ;
ALLP<-data.frame(ALLP.norm,ALLP.data.2 )  ;
str(ALLP)
head(ALLP)
ALLP$TextureClass<-ALLP.Texture.clases ;
head(ALLP.norm)
head(ALLP)
All.Data<-rbind(NAPT,ALLP) ;
head(NAPT)
head(ALLP)
ALLP$TextureClass<-ALLP.Texture.clases ;
ALLP$SAMPLE<-ALLP$Sample ;
ALLP$VALUE<-c('Median') ;
ALLP$ANALYSIS<-c('Hydrometer') ;
head(ALLP)
head(NAPT)
All.Data<-rbind(NAPT,ALLP) ;
head(All.Data)
tail(All.Data)
All.Data$TextureFactor<-as.factor(All.Data$TextureClass) ;
levels(All.Data$TextureFactor)
for (i in levels(All.Data$TextureFactor)) {
#i=levels(All.Data$TextureFactor)[1]
assign(paste0('Texture_',i),All.Data[All.Data$TextureFactor==i,])
}
Selected_Samples<-c(Texture_C$Sample, Texture_CL$Sample[1:6] , Texture_L$Sample[1:6], Texture_LS$Sample[1:6], Texture_S$Sample[1:6],Texture_SCL$Sample, Texture_SICL$Sample[1:6],Texture_SIL$Sample[1:6], Texture_SL$Sample[1:6])
Paper.Samples<-All.Data[All.Data$Sample %in% Selected_Samples, ]
head(Paper.Samples)
writeWorksheetToFile("Results_data_all.xlsx",Paper.Samples, sheet="Selected_Original") ;
writeWorksheetToFile("Results_data_all.xlsx",Paper.Samples, sheet="Selected_Original") ;
head(All.Data)
tail(All.Data)
str(All.Data)
str(ALLP)
str(NAPT)
levels(All.Data$TextureFactor)
View(Texture_C)
View(Texture_C)
View(Texture_CL)
View(Texture_CL)
Selected_Samples<-c(Texture_C$Sample, Texture_CL$Sample[1:6] , Texture_L$Sample[1:6], Texture_LS$Sample[1:6], Texture_S$Sample[1:6],Texture_SCL$Sample, Texture_SICL$Sample[1:6],Texture_SIL$Sample[1:6], Texture_SL$Sample[1:6])
Selected_Samples
View(Texture_SL)
View(Texture_SL)
head(All.Data)
Selected_Samples<-c(Texture_C$SAMPLE, Texture_CL$SAMPLE[1:6] , Texture_L$SAMPLE[1:6], Texture_LS$SAMPLE[1:6], Texture_S$SAMPLE[1:6],Texture_SCL$SAMPLE, Texture_SICL$SAMPLE[1:6],Texture_SIL$SAMPLE[1:6], Texture_SL$SAMPLE[1:6])
Selected_Samples
Paper.Samples<-All.Data[All.Data$SAMPLE %in% Selected_Samples, ]
head(Paper.Samples)
writeWorksheetToFile("Results_data_all.xlsx",Paper.Samples, sheet="Selected_Original") ;
head(Paper.Samples)
Paper.Samples<-All.Data[All.Data$SAMPLE %in% Selected_Samples,c(1,2,3,4,5,7,8,9,10) ]
head(Paper.Samples)
Paper.Samples<-All.Data[All.Data$SAMPLE %in% Selected_Samples,c(1,2,3,4,5,6,8,9,10,11) ]
head(Paper.Samples)
names(Paper.Samples)[1:6]<-c('CLAY_Norm' , 'SILT_Norm' , 'SAND_Norm', 'SAND' , 'SILT' , 'CLAY')
head(Paper.Samples)
writeWorksheetToFile("Results_data_all.xlsx",Paper.Samples, sheet="Selected_Original") ;
